name: tests
run-name: tests
on:
  workflow_call:

  push:
    branches:
      - "*"
jobs:
  unittests:
    strategy:
      fail-fast: false
      matrix:
        os: [ ubuntu-latest, ubuntu-24.04, ubuntu-22.04 ]
    runs-on: ${{ matrix.os }}
    steps:
    - name: 'Checkout repository'
      uses: actions/checkout@v3
      with:
        submodules: true
    - name: 'Install dependencies'
      run: |
        sudo apt update
        sudo apt install cmake \
        	g++ \
        	libfmt-dev \
        	libboost-all-dev
    - name: 'Build'
      run: |
        mkdir build/
        cd build/
        cmake ..
        make -j3
    - name: 'Run tests'
      run: |
        cd build/unit_tests/
        ./unit_tests
